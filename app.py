from flask import Flask, request, render_template_string, send_file, jsonify, redirect, session
from threading import Lock
from werkzeug.security import generate_password_hash, check_password_hash
import pandas as pd
import io
from datetime import datetime
import secrets
import os

app = Flask(__name__)
app.secret_key = os.environ.get('SECRET_KEY', secrets.token_hex(32))

# –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
inventory = {}
history = {}
users = {"admin": {"password": generate_password_hash("admin123"), "role": "admin"}}
pending_finish = {}
inventory_lock = Lock()
users_lock = Lock()

# –ü–û–õ–ù–´–ô –°–õ–û–í–ê–†–¨ –¢–û–í–ê–†–û–í (378 –ø–æ–∑–∏—Ü–∏–π)
GLOBAL_PRODUCTS = {
    "–ê–ª–∫–æ–≥–æ–ª—å - –í–∏–Ω–æ": {
        "–ù–æ—á–µ –¥–µ –õ—É–Ω–∞ –±—Ä—é—Ç –∏–≥—Ä –±–µ–ª–æ–µ 0,75": {"unit": "–ª", "code": 5457},
        "–í–∏–Ω–æ –∏–≥—Ä–∏—Å—Ç–æ–µ –ë–æ—Ç—Ç–µ–≥–∞ –ü—Ä–æ—Å–µ–∫–∫–æ –†–æ–∑–µ –±—Ä—é—Ç 0,2": {"unit": "–≥—Ä.", "code": 4233},
        "–í–∏–Ω–æ –∏–≥—Ä–∏—Å—Ç–æ–µ –ê–±—Ä–∞—É –î—é—Ä—Å–æ –±—Ä—é—Ç 0,375": {"unit": "–≥—Ä.", "code": 4313},
        "–í–∏–Ω–æ –∫—Ä–∞—Å–Ω–æ–µ  –¢–µ–º–ø—Ä–∞–Ω–∏–ª—å–æ —Å—É—Ö–æ–µ 0,187": {"unit": "–ª", "code": 5425},
        "–í–∏–Ω–æ –±–µ–ª–æ–µ –ü–∏–Ω–æ –ì—Ä–∏–¥–∂–∏–æ —Å—É—Ö–æ–µ 0,75": {"unit": "–ª", "code": 4064},
        "–í–∏–Ω–æ –∫—Ä–∞—Å–Ω–æ–µ –ö—å—è–Ω—Ç–∏ —Å—É—Ö–æ–µ 0,75": {"unit": "—à—Ç.", "code": 4069},
        "–í–∏–Ω–æ –±–µ–ª–æ–µ  –°–æ–≤–∏–Ω—å–æ–Ω –ë–ª–∞–Ω —Å—É—Ö–æ–µ 0,187": {"unit": "–ª", "code": 4066},
        "–í–∏–Ω–æ –±–µ–ª–æ–µ  –ü–∏–Ω–æ –ì—Ä–∏–¥–∂–∏–æ —Å—É—Ö–æ–µ 0,75 –º–æ–ª–æ–¥–æ–µ": {"unit": "–ª", "code": 4369},
        "–í–∏–Ω–æ –±–µ–ª–æ–µ  –†–∏—Å–ª–∏–Ω–≥ –ö—É–±–∞–Ω—å —Å—É—Ö–æ–µ 0,75": {"unit": "–ª", "code": 4065},
        "–í–∏–Ω–æ –±–µ–ª–æ–µ  –°–æ–≤–∏–Ω—å–æ–Ω –ë–ª–∞–Ω —Å—É—Ö–æ–µ 0,75": {"unit": "–ª", "code": 5421},
        "–í–∏–Ω–æ –±–µ–ª–æ–µ  –®–∞—Ä–¥–æ–Ω–µ –ì—É–¥ –°—Ç–µ–π–∫ –∫—É–±–∞–Ω—å —Å—É—Ö–æ–µ 0,187": {"unit": "–ª", "code": 4067},
        "–í–∏–Ω–æ –±–µ–ª–æ–µ –ì–µ–æ—Ä–≥ –®—Ç–∞–π–Ω–º–µ—Ü –†–ò–°–õ–ò–ù–ì 0,75": {"unit": "–ª", "code": 4239},
        "–í–∏–Ω–æ –∏–≥—Ä –†–µ–∂–∏ –±—Ä—é—Ç –±–µ–ª–æ–µ 0,75": {"unit": "–ª", "code": 5440},
        "–í–∏–Ω–æ –∏–≥—Ä–∏—Å—Ç–æ–µ –ë—Ä—É–Ω–∏ –ü—Ä–æ—Å–µ–∫–∫–æ –±—Ä—é—Ç –±–µ–ª–æ–µ": {"unit": "–ª", "code": 4371},
        "–í–∏–Ω–æ –∏–≥—Ä–∏—Å—Ç–æ–µ –î–µ–≤–∏–∫–æ –±–µ–ª–æ–µ –±—Ä—é—Ç 0,75": {"unit": "–ª", "code": 4862},
        "–í–∏–Ω–æ –∫—Ä–∞—Å–Ω–æ–µ  –ú–µ—Ä–ª–æ —Å—É—Ö–æ–µ 0,75": {"unit": "–ª", "code": 4070},
        "–í–∏–Ω–æ –∫—Ä–∞—Å–Ω–æ–µ  –ü—Ä–∏–º–∏—Ç–∏–≤–æ   —Å—É—Ö–æ–µ 0,187": {"unit": "—à—Ç.", "code": 4071},
        "–í–∏–Ω–æ –∫—Ä–∞—Å–Ω–æ–µ  –®–∏—Ä–∞–∑  —Å—É—Ö–æ–µ 0,187": {"unit": "—à—Ç.", "code": 4072},
        "–í–∏–Ω–æ —Ä–æ–∑–æ–≤–æ–µ –ì—Ä–µ–Ω–∞—à-–°–µ–Ω—Å–æ 0,187  –ø/—Å—É—Ö": {"unit": "–≥—Ä.", "code": 4230},
        "–í–∏–Ω–æ —Ä–æ–∑–æ–≤–æ–µ –ó–∏–Ω—Ñ–∞–Ω–¥–µ–ª—å –ø/—Å–ª  0,187": {"unit": "–ª", "code": 4068},
        "–ì–∞–Ω—á–∞ –ê—Å—Ç–∏ —Å–ª –±–µ–ª –∏–≥—Ä–∏—Å—Ç–æ–µ 0,2": {"unit": "–ª", "code": 4073},
        "–î–µ–ª–∏—Å—Å–∏–º–æ –±–µ–ª–æ–µ –±—Ä—é—Ç 0,25": {"unit": "–ª", "code": 4074},
        "–î–µ–ª–∏—Å—Å–∏–º–æ –±–µ–ª–æ–µ –±—Ä—é—Ç 0,75": {"unit": "–ª", "code": 4075},
        "–î–µ–ª–∏—Å—Å–∏–º–æ –±–µ–ª–æ–µ –ø/—Å–ª 0,25": {"unit": "–ª", "code": 4076},
        "–î–µ–ª–∏—Å—Å–∏–º–æ —Ä–æ–∑–æ–≤–æ–µ –±—Ä—é—Ç 0,25": {"unit": "–ª", "code": 4077},
        "–î–µ–ª–∏—Å—Å–∏–º–æ —Ä–æ–∑–æ–≤–æ–µ –ø/—Å–ª 0,25": {"unit": "–ª", "code": 4078},
        "–ö—é–≤—ç –î–∞—Ä–∂–µ–Ω  –±—Ä—é—Ç –∏–≥—Ä –±–µ–ª–æ–µ 0,75": {"unit": "–ª", "code": 4922},
        "–ü—Ä–æ—Å—Å–µ–∫–æ –ì–∞—ç—Ç–∞–Ω–æ —ç–∫—Å—Ç—Ä–∞ –¥—Ä–∞–π 0,2": {"unit": "—à—Ç.", "code": 4079},
        "–¢–∏–Ω—Ç–æ–Ω–µ–ª–ª–∏ –ü—Ä–æ—Å–µ–∫–∫–æ —ç–∫—Å—Ç—Ä–∞ –¥—Ä–∞–π 0,75": {"unit": "–ª", "code": 4082},
        "–§–∏–æ—Ä–∏–Ω–æ –¥*–û—Ä–æ –ë—Ä—é—Ç –∏–≥—Ä –±–µ–ª": {"unit": "–ª", "code": 4080},
        "–§—Ä–∞–Ω—Å—É–∞ –ë–ª–∞–Ω –¥–µ –ë–ª–∞–Ω —Å—É—Ö 0,2": {"unit": "–ª", "code": 4081},
        "–®–∞—Ç–æ –¥–µ –ª—è –ú–µ—Ä  –±—Ä—é—Ç –∏–≥—Ä –±–µ–ª–æ–µ 0,75": {"unit": "–ª", "code": 4279},
        "–í–∏–Ω–æ –∏–≥—Ä–∏—Å—Ç–æ–µ –ë–æ—Ç—Ç–µ–≥–∞ –ì–æ–ª–¥ –ü—Ä–æ—Å–µ–∫–∫–æ –±—Ä—é—Ç 0,2": {"unit": "–ª", "code": 4232},
        "–í–∏–Ω–æ –∏–≥—Ä–∏—Å—Ç–æ–µ –ê–±—Ä–∞—É –î—é—Ä—Å–æ —Ä–æ–∑–µ  0,375": {"unit": "–≥—Ä.", "code": 4483},
    },
    "–ê–ª–∫–æ–≥–æ–ª—å - –ö—Ä–µ–ø–∫–æ–µ": {
        "–í–∏—Å–∫–∏ –í—É–¥—Ñ–æ—Ä–¥ –†–µ–∑–µ—Ä–≤ 0,75": {"unit": "—à—Ç.", "code": 4009},
        "–í–∏—Å–∫–∏ –ì–ª–µ–Ω–º–æ—Ä–∞–Ω–¥–∂–∏ –û—Ä–∏–¥–∂–∏–Ω–∞–ª –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4010},
        "–í–∏—Å–∫–∏ –ì–ª–µ–Ω—Ñ–∏–¥–¥–∏–∫ 12 –ª–µ—Ç": {"unit": "–ª", "code": 4011},
        "–í–∏—Å–∫–∏ –ì–ª–µ–Ω—Ñ–∏–¥–¥–∏–∫ 12 –ª–µ—Ç –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4231},
        "–í–∏—Å–∫–∏ –ì—Ä–∞–Ω—Ç—Å –¢—Ä–∏–ø–ª –í—É–¥ 3 –≥": {"unit": "–ª", "code": 4012},
        "–í–∏—Å–∫–∏ –î–∂–µ–∫ –î–µ–Ω–∏—ç–ª—Å –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4136},
        "–í–∏—Å–∫–∏ –î–∂–µ–∫ –î–µ–Ω–∏—ç–ª—Å 1–ª": {"unit": "–ª", "code": 4013},
        "–í–∏—Å–∫–∏ –î–∂–µ–∫ –î—ç–Ω–∏–µ–ª*—Å –§–∞–π–µ—Ä 0,7": {"unit": "–ª", "code": 4014},
        "–í–∏—Å–∫–∏ –î–∂–µ–∫ –î—ç–Ω–∏–µ–ª*—Å –•–∞–Ω–∏ 0,7": {"unit": "–ª", "code": 4015},
        "–í–∏—Å–∫–∏ –î–∂–µ–º–µ—Å–æ–Ω 1–ª": {"unit": "–ª", "code": 4016},
        "–í–∏—Å–∫–∏ –î–∂–µ–Ω—Ç–µ–ª—å–º–µ–Ω –î–∂–µ–∫ –†—ç–∞—Ä –¢–µ–Ω–Ω. –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4017},
        "–í–∏—Å–∫–∏ –ò—Ä–ª–∏ –¢–∞–π–º—Å –û–ª–¥": {"unit": "–ª", "code": 4018},
        "–í–∏—Å–∫–∏ –õ—ç–Ω–≥—Å –°–º—É—Å —ç–Ω–¥ –ú–µ–ª–ª–æ—É 0,7": {"unit": "–ª", "code": 4376},
        "–í–∏—Å–∫–∏ –ú—ç–π–∫–µ—Ä—Å –ú–∞—Ä–∫ 0,7": {"unit": "—à—Ç.", "code": 4019},
        "–í–∏—Å–∫–∏ –°–∏–Ω–≥–ª—Ç–æ–Ω 12 –ª–µ—Ç –±—É—Ç 0,2": {"unit": "—à—Ç.", "code": 4020},
        "–í–∏—Å–∫–∏ –¢–∞–ª–º–æ—Ä –î–ò–£ 3 –≥ –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4021},
        "–í–∏—Å–∫–∏ –¢–∞–ª–º–æ—Ä –î–ò–£ 3 –≥–æ–¥–∞": {"unit": "–ª", "code": 4022},
        "–í–æ–¥–∫–∞ –ë–∞–π–∫–∞–ª": {"unit": "–ª", "code": 4023},
        "–í–æ–¥–∫–∞ –ë–∞–π–∫–∞–ª –ê–π—Å": {"unit": "–ª", "code": 4024},
        "–í–æ–¥–∫–∞ –ë–µ–ª—É–≥–∞ –ó–æ–ª–æ—Ç–∞—è –ª–∏–Ω–∏—è 0,75": {"unit": "–ª", "code": 4028},
        "–í–æ–¥–∫–∞ –ë–µ–ª—É–≥–∞ –Ω–æ–±–ª": {"unit": "–ª", "code": 4029},
        "–í–æ–¥–∫–∞ –ë–µ–ª—É–≥–∞ –Ω–æ–±–ª –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4030},
        "–í–æ–¥–∫–∞ –ù–µ—Ä–ø–∞ –û—Ä–≥–∞–Ω–∏–∫ 0,7": {"unit": "—à—Ç.", "code": 4033},
        "–í–æ–¥–∫–∞ –û–Ω–µ–≥–∏–Ω –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4364},
        "–í–æ–¥–∫–∞ –û–Ω–µ–≥–∏–Ω": {"unit": "—à—Ç.", "code": 4367},
        "–í–æ–¥–∫–∞ –§–∏–Ω–ª—è–Ω–¥–∏—è": {"unit": "–ª", "code": 4034},
        "–í–æ–¥–∫–∞ –§–∏–Ω–ª—è–Ω–¥–∏—è –ì—Ä–µ–π–ø—Ñ—Ä—É—Ç": {"unit": "–ª", "code": 4035},
        "–í–æ–¥–∫–∞ –¶–∞—Ä—Å–∫–∞—è –ó–æ–ª–æ—Ç–∞—è": {"unit": "–ª", "code": 4036},
        "–í–æ–¥–∫–∞ –¶–∞—Ä—Å–∫–∞—è –ó–æ–ª–æ—Ç–∞—è –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4037},
        "–í–æ–¥–∫–∞ –¶–∞—Ä—Å–∫–∞—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è": {"unit": "–ª", "code": 4038},
        "–í–æ–¥–∫–∞ –¶–∞—Ä—Å–∫–∞—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4039},
        "–í–æ–¥–∫–∞ –ß–∞—á–∞ –æ—Ç–±–æ—Ä–Ω–∞—è –±—É—Ç 0,1": {"unit": "—à—Ç.", "code": 4342},
        "–î–∂–∏–Ω –ë–∞—Ä—Ä–∏—Å—Ç–µ—Ä –î—Ä–∞–π –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4040},
        "–î–∂–∏–Ω –ë–∞—Ä—Ä–∏—Å—Ç–µ—Ä –û–ª–¥ –¢–æ–º –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4041},
        "–î–∂–∏–Ω –ì–ª–µ–Ω—Å –î–∂–∏–Ω 0,7": {"unit": "–ª", "code": 4042},
        "–î–∂–∏–Ω –ì—Ä–∏–Ω –ë–∞–±—É–Ω 0,7": {"unit": "–≥—Ä.", "code": 4043},
        "–î–∂–∏–Ω –î–∏–ø –§–æ—Ä–µ—Å—Ç –î–∂–∏–Ω –î—Ä–∞–π  0,5": {"unit": "—à—Ç.", "code": 4044},
        "–î–∂–∏–Ω –õ–æ–∫–≤—É–¥ –û—Ä–∏–¥–∂–∏–Ω–∞–ª –î—Ä–∞–π  0,5": {"unit": "–ª", "code": 5458},
        "–î–∂–∏–Ω –õ–æ–Ω–¥–æ–Ω –î—Ä–∞–π –¥–∂–∏–Ω  0,7": {"unit": "–ª", "code": 4045},
        "–î–∂–∏–Ω –ú–∞—Ä–µ –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4368},
        "–ö–æ–Ω—å—è–∫ –ê–ù–ò –ö–í (7 –ª–µ—Ç) 0,05 –±—É—Ç": {"unit": "—à—Ç.", "code": 4046},
        "–ö–æ–Ω—å—è–∫ –ê–ù–ò –ö–í (7 –ª–µ—Ç) 0,25 –±—É—Ç": {"unit": "—à—Ç.", "code": 4047},
        "–ö–æ–Ω—å—è–∫ –ê–ù–ò –ö–í (7 –ª–µ—Ç) 0,5 –±—É—Ç": {"unit": "—à—Ç.", "code": 4048},
        "–ö–æ–Ω—å—è–∫ –ê—Ä–∞—Ä–∞—Ç 5 –∑–≤ –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 5424},
        "–ö–æ–Ω—å—è–∫ –ê—Ä–∞—Ä–∞—Ç 5 –∑–≤ –±—É—Ç 0,250": {"unit": "—à—Ç.", "code": 4054},
        "–ö–æ–Ω—å—è–∫ –ê—Ä–æ—Ä–æ—Ç 5 –∑–≤. 1–ª": {"unit": "–ª", "code": 4055},
        "–ö–æ–Ω—å—è–∫ –ê—Ö—Ç–∞–º–∞—Ä –ö–° (10 –ª–µ—Ç) 0,05": {"unit": "–ª", "code": 4049},
        "–ö–æ–Ω—å—è–∫ –ö–∞–º—é –í–° 3 –≥–æ–¥–∞ 0,7": {"unit": "—à—Ç.", "code": 4373},
        "–ö–æ–Ω—å—è–∫ –ö–∞–º—é –í–°–û–ü 4 –≥–æ–¥–∞ 0,7": {"unit": "—à—Ç.", "code": 4050},
        "–ö–æ–Ω—å—è–∫ –ö—É—Ä–≤—É–∞–∑—å–µ –•–û 0,7": {"unit": "—à—Ç.", "code": 4051},
        "–ö–æ–Ω—å—è–∫ –ú–û–ù–ù–ï –í–° 0,05 –±—É—Ç 3 –≥–æ–¥–∞": {"unit": "—à—Ç.", "code": 4372},
        "–ö–æ–Ω—å—è–∫ –•–µ–Ω–Ω–µ—Å—Å–∏ –í–°–û–ü –ø—Ä–∏–≤—ä–ª–∂ –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4052},
        "–ö–æ–Ω—å—è–∫ –•–µ–Ω–Ω–µ—Å—Å–∏ –•–û 0,7": {"unit": "—à—Ç.", "code": 4053},
        "–†–æ–º –ë–∞—Ä—Å–µ–ª–æ –ê–Ω—å–µ—Ö–æ": {"unit": "–ª", "code": 4058},
        "–†–æ–º –ë–∞—Ä—Å–µ–ª–æ –ë–ª–∞–Ω–∫–æ": {"unit": "–ª", "code": 4059},
        "–†–æ–º –ë–æ–ª—å–µ –ë–ª–∞–Ω 0,7": {"unit": "–ª", "code": 5419},
        "–†–æ–º –ë–æ–ª—å–µ –ì–æ–ª–¥ 0,7": {"unit": "–ª", "code": 5420},
        "–†–æ–º –†–æ–Ω –ö–∞–ª–∞–¥–æ—Å –£–∞–π—Ç  –Ω/–≤—ã–¥–µ—Ä–∂ 0,7": {"unit": "–ª", "code": 4374},
        "–¢–µ–∫–∏–ª–∞ –†—É—Å—Ç–µ—Ä –†–æ—Ö–æ –ë–ª–∞–Ω–∫–æ  0,7": {"unit": "–ª", "code": 4375},
        "–¢–µ–∫–∏–ª–∞ –≠–ª—å –ë–∞–Ω–¥–∏–¥–æ –ù–µ–≥—Ä–æ –ë–ª–∞–Ω–∫–æ 0,7": {"unit": "–ª", "code": 4060},
        "–¢–µ–∫–∏–ª–∞ –≠–ª—å –ë–∞–Ω–¥–∏–¥–æ –ù–µ–≥—Ä–æ –ì–æ–ª–¥ 0,7": {"unit": "–ª", "code": 4061},
        "–¢–µ–∫–∏–ª–∞ –≠–ª—å –•–∏–º–∞–¥–æ—Ä  –†–µ–ø–æ—Å–∞–¥–æ": {"unit": "–ª", "code": 4062},
    },
    "–ê–ª–∫–æ–≥–æ–ª—å - –ü–∏–≤–æ": {
        "–ê–±–±–µ –±—Ä—é–Ω 0,33 –ª": {"unit": "–ª", "code": 4090},
        "–ë–æ–Ω –°–µ–∑–æ–Ω —Å–∏–¥—Ä 0,4": {"unit": "—à—Ç.", "code": 4096},
        "–ì–∏–Ω–Ω–µ—Å—Å –î—Ä–∞—Ñ—Ç —Ç—ë–º–Ω 0,44–ª": {"unit": "–ª", "code": 4091},
        "–ö–æ—Ä–æ–Ω–∞ —ç–∫—Å—Ç—Ä–∞ 0,355 –ª": {"unit": "–ª", "code": 5571},
        "–ü–∏–≤–æ –°–¢–ê–£–¢ —Ç—ë–º–Ω —Ñ–∏–ª—å—Ç—Ä 30–ª": {"unit": "–ª", "code": 4085},
        "–ü–∏–≤–æ –§–†–ê–ù–¶–ò–°–ö–ê–ù–ï–† 30–ª": {"unit": "–ª", "code": 4087},
        "–ü–∏–≤–æ –®–ü–ê–¢–ï–ù –ú—é–Ω—Ö–µ–Ω –•–µ–ª–ª–µ—Å 30–ª": {"unit": "–ª", "code": 4089},
        "–°—Ç–µ–ª–ª–∞ –ê—Ä—Ç—É–∞ 20–ª": {"unit": "–ª", "code": 4086},
        "–°—Ç–µ–ª–ª–∞ –ê—Ä—Ç—É–∞ –±/–∞ 0,44": {"unit": "–ª", "code": 4092},
        "–•—É–≥–∞—Ä–¥–µ–Ω  –±–µ–ª–æ–µ –Ω/—Ñ 0,44": {"unit": "–ª", "code": 4093},
        "–®–ø–∞—Ç–µ–Ω –ú—é–Ω—Ö–µ–Ω –•–µ–ª–ª–Ω—Å 0.45": {"unit": "–ª", "code": 4095},
    },
    "–ê–ª–∫–æ–≥–æ–ª—å - –ü—Ä–æ—á–µ–µ": {
        "–í–µ—Ä–º—É—Ç –ì–∞–Ω—á–∞ –ë—å—è–Ω–∫–æ 1,0": {"unit": "—à—Ç.", "code": 4006},
        "–í–µ—Ä–º—É—Ç –ì–∞–Ω—á–∞ –†–æ—Å—Å–æ 1,0": {"unit": "—à—Ç.", "code": 4007},
        "–í–µ—Ä–º—É—Ç –ì–∞–Ω—á–∞ –≠–∫—Å—Ç—Ä–∞ –î—Ä–∞–π 1,0": {"unit": "—à—Ç.", "code": 4008},
        "–í–µ—Ä–º—É—Ç –ú–∞—Ä—Ç–∏–Ω–∏ –§–∏–µ—Ä–æ 1,0": {"unit": "—à—Ç.", "code": 4287},
        "–õ–∏–∫—ë—Ä –ê–π—Ä–∏—à –ö—Ä–∏–º 0,7": {"unit": "–ª", "code": 4370},
        "–õ–∏–∫—ë—Ä –ë–µ–ª—É–≥–∞ –•–∞–Ω—Ç–∏–Ω–≥ —Ç—Ä. –±—É—Ç 0,05": {"unit": "—à—Ç.", "code": 4031},
        "–õ–∏–∫—ë—Ä –ë–µ–ª—É–≥–∞ –•–∞–Ω—Ç–∏–Ω–≥ —Ç—Ä–∞–≤—è–Ω–æ–π": {"unit": "–ª", "code": 4032},
        "–õ–∏–∫—ë—Ä –Ø–≥–µ—Ä–º–∞–π—Å—Ç–µ—Ä": {"unit": "–ª", "code": 4056},
        "–õ–∏–∫—ë—Ä –Ø–≥–µ—Ä–º–∞–π—Å—Ç–µ—Ä –±—É—Ç 0,04 –º–ª": {"unit": "—à—Ç.", "code": 4057},
        "–ú–∞—Ä—Ç–∏–Ω–∏ –†–æ–∑–∞—Ç–æ 0,25": {"unit": "—à—Ç.", "code": 4285},
        "–ú–∞—Ä—Ç–∏–Ω–∏ –°–µ–∫–∫–æ 0,25": {"unit": "—à—Ç.", "code": 4284},
        "–ú–∞—Ä—Ç–∏–Ω–∏ –°–µ–º–∏ –î–æ–ª—å—á–µ 0,25": {"unit": "–ª", "code": 4286},
        "–ù–∞—Å—Ç–æ–π–∫–∞ –ë–∞–π–∫–∞–ª -–°–µ–≤–µ—Ä–Ω–∞—è —Ç—Ä–æ–ø–∞ –ö–ª—é–∫–≤–∞ 0,5": {"unit": "–ª", "code": 4025},
        "–ù–∞—Å—Ç–æ–π–∫–∞ –ë–∞–π–∫–∞–ª –ú—ë–¥ —Å –ø–µ—Ä—Ü–µ–º 0,5": {"unit": "–ª", "code": 4026},
        "–ù–∞—Å—Ç–æ–π–∫–∞ –ë–∞–π–∫–∞–ª –Ω–∞ –∫–µ–¥—Ä. –æ—Ä–µ—à–∫–∞—Ö 0,5": {"unit": "–ª", "code": 4027},
        "–ù–∞—Å—Ç–æ–π–∫–∞ –û–Ω–µ–≥–∏–Ω –≥—É—Ä–º—ç –≤–∏—à–Ω—è 0,5": {"unit": "—à—Ç.", "code": 4366},
        "–ù–∞—Å—Ç–æ–π–∫–∞ –û–Ω–µ–≥–∏–Ω –≥—É—Ä–º—ç –∫—É—Ä–∞–≥–∞ 0,5": {"unit": "—à—Ç.", "code": 4365},
        "–ü–æ—Ä—Ç–≤–µ–π–Ω –ê–≥–¥–∞–º –±–µ–ª—ã–π 0,75": {"unit": "–ª", "code": 4314},
    },
    "–ì–æ—Ç–æ–≤—ã–µ –±–ª—é–¥–∞": {
        "–í–∞—Ä–µ–Ω–∏–∫–∏ –≤ –∞—Å—Å": {"unit": "—à—Ç.", "code": 4224},
        "–ö—É—Ä, —Ñ–∏–ª–µ –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω–æ–µ –ø/—Ñ —Å/–º 0,16": {"unit": "–ª", "code": 3941},
        "–ù–∞–≥–≥–µ—Ç—Å—ã –≤ –∫–ª—è—Ä–µ": {"unit": "–ª", "code": 3942},
        "–ü–µ–ª—å–º–µ–Ω–∏": {"unit": "–ª", "code": 3961},
        "–°—ç–Ω–¥–≤–∏—á –≤–µ—Ç—á–∏–Ω–∞ —Å—ã—Ä": {"unit": "—à—Ç.", "code": 5542},
        "–°—ç–Ω–¥–≤–∏—á —Å –∫—É—Ä–∏—Ü–µ–π": {"unit": "—à—Ç.", "code": 5541},
        "–°—ã—Ä–Ω–∏–∫–∏ –ø/—Ñ 70g": {"unit": "–∫–≥", "code": 3921},
    },
    "–ö–æ—Ñ–µ/–°–∏—Ä–æ–ø—ã": {
        "–ö–æ—Ñ–µ –±/—Ä": {"unit": "—à—Ç.", "code": 3956},
        "–ö–æ—Ñ–µ –∑–µ—Ä–Ω–æ 0,25–∫–≥": {"unit": "–∫–≥", "code": 3836},
        "–°–∏—Ä–æ–ø –≤–∞–Ω–∏–ª—å 1–ª": {"unit": "–ª", "code": 3837},
        "–°–∏—Ä–æ–ø –∫–∞—Ä–∞–º–µ–ª—å 1–ª": {"unit": "–ª", "code": 3838},
        "–°–∏—Ä–æ–ø –ª–µ—Å–Ω–æ–π –æ—Ä–µ—Ö 1–ª": {"unit": "–ª", "code": 3839},
        "–°–∏—Ä–æ–ø —à–æ–∫–æ–ª–∞–¥ 1–ª": {"unit": "–ª", "code": 3840},
    },
    "–ö—Ä—É–ø—ã/–ú–∞–∫–∞—Ä–æ–Ω—ã": {
        "–ì—Ä–µ—á–∫–∞": {"unit": "–≥—Ä.", "code": 3955},
        "–õ–∞–ø—à–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è 300g": {"unit": "–ª", "code": 3830},
        "–ú–∞–∫–∞—Ä–æ–Ω—ã": {"unit": "—à—Ç.", "code": 3959},
        "–ú–∞–Ω–∫–∞": {"unit": "—à—Ç.", "code": 3957},
        "–ü–µ—Ä–ª–æ–≤–∫–∞": {"unit": "–ª", "code": 3962},
        "–†–∏—Å": {"unit": "—à—Ç.", "code": 3964},
        "–•–ª–æ–ø—å—è –≥–µ—Ä–∫—É–ª–µ—Å": {"unit": "–ª", "code": 3833},
    },
    "–ú–∞—Å–ª–∞": {
        "–ú–∞–π–æ–Ω–µ–∑ –•–µ–ª–º–∞–Ω—Å 4,7–∫–≥": {"unit": "–∫–≥", "code": 3905},
        "–ú–∞—Å–ª–æ –±–µ–ª—ã–π —Ç—Ä—é—Ñ–µ–ª—å –æ–ª–∏–≤–∫–æ–≤–æ–µ": {"unit": "–ª", "code": 3899},
        "–ú–∞—Å–ª–æ –∫—É–Ω–∂—É—Ç–Ω–æ–µ 1,8–ª": {"unit": "–ª", "code": 3900},
        "–ú–∞—Å–ª–æ –æ–ª–∏–≤–∫–æ–≤–æ–µ": {"unit": "–ª", "code": 3901},
        "–ú–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ": {"unit": "–ª", "code": 3902},
        "–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ 0,5–∫–≥": {"unit": "–∫–≥", "code": 3906},
        "–ú–∞—Å–ª–æ —Ñ—Ä–∏—Ç—é—Ä–Ω–æ–µ": {"unit": "–ª", "code": 3903},
        "–û—Ç—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–∏—Ç—é—Ä": {"unit": "—à—Ç.", "code": 3904},
    },
    "–ú–æ–ª–æ—á–Ω–æ–µ": {
        "–ú–æ–ª–æ–∫–æ 3,2% 1–ª": {"unit": "–ª", "code": 3907},
        "–ú–æ–ª–æ–∫–æ –±–∞–Ω–∞–Ω–æ–≤–æ–µ 1–ª": {"unit": "–ª", "code": 3908},
        "–ú–æ–ª–æ–∫–æ –±–µ–∑–ª–∞–∫—Ç–æ–∑–Ω–æ–µ 1–ª": {"unit": "–ª", "code": 3909},
        "–ú–æ–ª–æ–∫–æ –∫–æ–∫–æ—Å–æ–≤–æ–µ 1–ª": {"unit": "–ª", "code": 3910},
        "–ú–æ–ª–æ–∫–æ —Å–æ–µ–≤–æ–µ 1–ª": {"unit": "–ª", "code": 3911},
        "–°–∏—Ä—Ç–∞–∫–∏ —Å—ã—Ä, –±—Ä—ã–Ω–∑–∞ 0,33": {"unit": "—à—Ç.", "code": 3912},
        "–°–ª–∏–≤–∫–∏ 10-11%": {"unit": "–ª", "code": 3913},
        "–°–ª–∏–≤–∫–∏ 22% 1–ª": {"unit": "–ª", "code": 3914},
        "–°–º–µ—Ç–∞–Ω–∞ 20% 1–∫–≥": {"unit": "–∫–≥", "code": 3915},
        "–°—ã—Ä –ü–∞—Ä–º–µ–∑–∞–Ω –∫—Ä–æ—à–∫–∞ 1,0–∫–≥": {"unit": "–∫–≥", "code": 3916},
        "–°—ã—Ä –°—É–ª—É–≥—É–Ω–∏ –∫–æ–ø—á—ë–Ω—ã–π 0,4–∫–≥": {"unit": "–∫–≥", "code": 3918},
        "–°—ã—Ä –ß–µ–¥–¥–∞—Ä": {"unit": "—à—Ç.", "code": 3920},
        "–°—ã—Ä —Å –ø–ª–µ—Å–µ–Ω—å—é": {"unit": "–ª", "code": 3917},
        "–°—ã—Ä —Ç–≤–æ—Ä–æ–∂–Ω—ã–π —Å–ª–∏–≤–æ—á–Ω—ã–π 1,0–∫–≥": {"unit": "–∫–≥", "code": 3919},
        "–°—ã—Ä–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏": {"unit": "–ª", "code": 3922},
    },
    "–ú—è—Å–æ": {
        "–ë–µ–¥—Ä–æ –∫—É—Ä–∏–Ω–æ–µ —Å/–º": {"unit": "—à—Ç.", "code": 5411},
        "–ë–µ–∫–æ–Ω –∫–æ–ø—á—ë–Ω—ã–π 1,0–∫–≥": {"unit": "–∫–≥", "code": 3855},
        "–í–µ—Ç—á–∏–Ω–∞ —Å/–ø": {"unit": "—à—Ç.", "code": 4762},
        "–ì–æ–≤—è–¥–∏–Ω–∞ —Å–ø": {"unit": "—à—Ç.", "code": 4761},
        "–ö–æ–ª–±–∞—Å–∫–∏ –≤ –∞—Å—Å": {"unit": "–ª", "code": 4083},
        "–ö–æ–ª–±–∞—Å–∫–∏ –≥–æ–≤—è–∂—å–∏ –ø/—Ñ": {"unit": "–ª", "code": 4593},
        "–ö–æ—Ç–ª–µ—Ç–∞ –≤–µ–≥–∞ –¥–ª—è –±—É—Ä–≥–µ—Ä–∞ 110g": {"unit": "–ª", "code": 3895},
        "–ö–æ—Ç–ª–µ—Ç–∞ –≥–æ–≤—è–∂—å—è 150g": {"unit": "–ª", "code": 3896},
        "–ö–æ—Ç–ª–µ—Ç–∞ –∫—É—Ä–∏–Ω–∞—è –¥–ª—è –±—É—Ä–≥–µ—Ä–∞ 130g": {"unit": "–ª", "code": 3898},
        "–ö—Ä—ã–ª—å—è –∫—É—Ä–∏–Ω—ã–µ –≤ –º–∞—Ä–∏–Ω–∞–¥–µ 0,92–∫–≥": {"unit": "–∫–≥", "code": 3940},
        "–ö—É—Ä—ã, –≥–æ–ª–µ–Ω—å, –±–µ–¥—Ä–æ, –∫—Ä—ã–ª–æ, —Ñ–∏–ª–µ —Å/–ø": {"unit": "–ª", "code": 3958},
        "–°–≤–∏–Ω–∏–Ω–∞ —Å/–ø": {"unit": "—à—Ç.", "code": 3965},
        "–°–æ—Å–∏—Å–∫–∏ —Å/–ø": {"unit": "—à—Ç.", "code": 3966},
        "–°—Ç–µ–π–∫ –†–∏–±–∞–π –∫–≥": {"unit": "–∫–≥", "code": 4867},
        "–°—Ç–µ–π–∫ –†–∏–±–∞–π, –ø–æ—Ä—Ü–∏–∏": {"unit": "—à—Ç.", "code": 3944},
        "–°—Ç–µ–π–∫ —Å—Ç—Ä–∏–ø–ª–æ–π–Ω —Å/–º": {"unit": "–ª", "code": 3943},
        "–§–∞—Ä—à –ø–µ—Ä—Å–æ–Ω–∞–ª": {"unit": "–ª", "code": 3968},
        "–§–∞—Ä—à –≥–æ–≤—è–∂–∏–π –∫–≥": {"unit": "–∫–≥", "code": 4855},
    },
    "–ù–∞–ø–∏—Ç–∫–∏": {
        "–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω –†–∞—à —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫": {"unit": "–ª", "code": 3987},
        "–ê–∫–≤–∞ –º–∏–Ω–µ—Ä–∞–ª–µ 2,0–ª": {"unit": "–ª", "code": 4147},
        "–í–æ–¥–∞ –ü—Ä–∞–Ω–∞ –°–ø—Ä–∏–Ω–≥ 0,5": {"unit": "—à—Ç.", "code": 5403},
        "–í–æ–¥–∞ –ë–æ—Ä–∂–æ–º–∏ (–ü–≠–¢) 0,5–ª": {"unit": "–ª", "code": 3988},
        "–í–æ–¥–∞ –ö—Ä–∏—Å—Ç–µ–ª—å —Å/–≥ 0,33–ª": {"unit": "–ª", "code": 3994},
        "–í–æ–¥–∞ –°–≤—è—Ç–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ (–ü–≠–¢) 0,5–ª": {"unit": "–ª", "code": 3999},
        "–í–æ–¥–∞ –¥–µ—Ç—Å–∫–∞—è 0,33–ª": {"unit": "—à—Ç.", "code": 3989},
        "–í–æ–¥–∞ —Å/–≥–∞–∑ –¥/–∫–æ–∫—Ç–µ–π–ª—è 0,5–ª": {"unit": "–ª", "code": 3990},
        "–ö–∞–∫–∞–æ": {"unit": "—à—Ç.", "code": 3835},
        "–ö–∞–∫–∞–æ–ª–∞—Ç –ú–æ–∫–∫–æ 0,2–ª": {"unit": "–ª", "code": 5536},
        "–ö–∞–∫–∞–æ–ª–∞—Ç –ü–≠–¢ 0,2–ª": {"unit": "–ª", "code": 5534},
        "–ö–∞–∫–∞–æ–ª–∞—Ç –±–µ–∑/—Å–∞—Ö–∞—Ä–∞ 0,2–ª": {"unit": "–ª", "code": 5533},
        "–ö–∞–∫–∞–æ–ª–∞—Ç —Å—Ç–µ–∫–ª–æ 0,2–ª": {"unit": "–ª", "code": 5535},
        "–ö–æ–∫–∞-–ö–æ–ª–∞ (–æ—Ä–∏–≥–∏–Ω–∞–ª) 0,33–ª": {"unit": "–ª", "code": 5406},
        "–ö–æ–∫–∞-–ö–æ–ª–∞ (–æ—Ä–∏–≥–∏–Ω–∞–ª) 0,5–ª": {"unit": "–ª", "code": 3993},
        "–ö–æ–Ω—Ñ–µ—Ç—ã –ú–∞–ª–∏–Ω–∞ –≤ —à–æ–∫–æ–ª–∞–¥–µ": {"unit": "–ª", "code": 4959},
        "–õ–∏–º–æ–Ω–∞–¥ –ì—Ä—É—à–∞-—Ä–∞–∑–º–∞—Ä–∏–Ω": {"unit": "–ª", "code": 4004},
        "–õ–∏–º–æ–Ω–∞–¥ –ú–∞–Ω–≥–æ-–ø–µ—Ä—Ü—ã": {"unit": "–ª", "code": 3996},
        "–õ–∏–º–æ–Ω–∞–¥ –¥–æ–º–∞—à–Ω–∏–π (–ª–∏–º–æ–Ω-–ª–∞–π–º)": {"unit": "–ª", "code": 3995},
        "–õ–∏–º–æ–Ω–∞–¥ —Å–º–æ—Ä–æ–¥–∏–Ω–∞-–±–∞–∑–∏–ª–∏–∫": {"unit": "–ª", "code": 3997},
        "–õ–∏–º–æ–Ω–∞–¥—ã 0,33–ª –∞—Å—Å": {"unit": "–ª", "code": 4771},
        "–õ–∏–º–æ–Ω–∞–¥—ã 0,5–ª –∞—Å—Å": {"unit": "–ª", "code": 3991},
        "–ü–∏–≤–Ω–æ–π –Ω–∞–ø–∏—Ç–æ–∫ –•–£–ì–ê–†–î–ï–ù 20–ª": {"unit": "–ª", "code": 4088},
        "–ü—è—Ç—ã–π –û–∫–µ–∞–Ω —Å–≤ —Ñ–∏–ª—å—Ç—Ä 30–ª": {"unit": "–ª", "code": 4135},
        "–°–∞–Ω –ë–µ–Ω–µ–¥–µ—Ç—Ç–æ –≤ –∞—Å—Å 0,33–ª": {"unit": "—à—Ç.", "code": 4407},
        "–°–∞—Ö–∞—Ä–Ω—ã–π –ø–µ—Å–æ–∫": {"unit": "—à—Ç.", "code": 3869},
        "–°–æ–∫ –≤ –∞—Å—Å–æ—Ä—Ç 0,3+0,2–ª": {"unit": "—à—Ç.", "code": 4000},
        "–°–ø–∏—Ä—Ç–Ω–æ–π –Ω–∞–ø–∏—Ç–æ–∫ –ê–ø–µ—Ä–æ–ª—å 1–ª": {"unit": "–ª", "code": 4005},
        "–°–ø—Ä–∞–π—Ç 0,5–ª": {"unit": "–ª", "code": 4001},
        "–¢–æ–Ω–∏–∫": {"unit": "—à—Ç.", "code": 4002},
        "–¢–æ–Ω–∏–∫ 0,33–ª": {"unit": "—à—Ç.", "code": 5520},
        "–§–∞–Ω—Ç–∞ 0,5–ª": {"unit": "–ª", "code": 4003},
        "–§–∏–ª—å—Ç—Ä-–ø–∞–∫–µ—Ç –¥–ª—è —á–∞—è": {"unit": "–ª", "code": 3841},
        "–ß–∞–π –≤ –ø–∞–∫–µ—Ç–∏–∫–∞—Ö –¥/–ø–µ—Ä—Å–æ–Ω–∞–ª–∞": {"unit": "–ª", "code": 3970},
        "–ß–∞–π –∑–µ–ª—ë–Ω—ã–π –ª–∏—Å—Ç–æ–≤–æ–π 0,25–∫–≥": {"unit": "–∫–≥", "code": 3842},
        "–ß–∞–π —Ç—Ä–∞–≤—è–Ω–æ–π 0,25–∫–≥": {"unit": "–∫–≥", "code": 3844},
        "–ß–∞–π —Ö–æ–ª–æ–¥–Ω—ã–π –≤ –∞—Å—Å 0,5–ª": {"unit": "–ª", "code": 3998},
        "–ß–∞–π —á—ë—Ä–Ω—ã–π –ª–∏—Å—Ç–æ–≤–æ–π 0,25–∫–≥": {"unit": "–∫–≥", "code": 3843},
        "–ß–µ—Ä–Ω–∞—è –º–∞–º–±–∞ 0,5–ª": {"unit": "—à—Ç.", "code": 4094},
        "–®–æ–∫–æ–ª–∞–¥ –≤ –∞—Å—Å": {"unit": "–ª", "code": 3894},
    },
    "–û–≤–æ—â–∏": {
        "–ë–∞—Ç–∞—Ç 2,5–∫–≥": {"unit": "–∫–≥", "code": 3934},
        "–í–æ–¥–æ—Ä–æ—Å–ª–∏ –Ω–æ—Ä–∏ 100–ª–∏—Å—Ç–æ–≤": {"unit": "–ª", "code": 3923},
        "–ö–∞–ø—É—Å—Ç–∞ –±/–∫": {"unit": "—à—Ç.", "code": 3971},
        "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Å–≤ –∫–≥": {"unit": "–∫–≥", "code": 3972},
        "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏ —Å/–º –∫–≥": {"unit": "–∫–≥", "code": 3935},
        "–ö—É–∫—É—Ä—É–∑–∞ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è": {"unit": "—à—Ç.", "code": 4957},
        "–ö—É–∫—É—Ä—É–∑–∞ –ø–æ—á–∞—Ç–∫–∏": {"unit": "—à—Ç.", "code": 3936},
        "–õ—É–∫ –∫–æ–Ω—Ñ–∏ –ø/—Ñ": {"unit": "–ª", "code": 3932},
        "–õ—É–∫ –∫–æ–ø—á–µ–Ω—ã–π –ø/—Ñ": {"unit": "–ª", "code": 3933},
        "–õ—É–∫ –∫—Ä–∞—Å–Ω—ã–π —Ä–µ–ø—á–∞—Ç—ã–π": {"unit": "–ª", "code": 3974},
        "–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π": {"unit": "–ª", "code": 3973},
        "–ú–∞—Å–ª–∏–Ω—ã 0,09–∫–≥": {"unit": "–∫–≥", "code": 3926},
        "–ú–∞—Å–ª–∏–Ω—ã –≤—è–ª–µ–Ω—ã–µ 0,4–∫–≥": {"unit": "–∫–≥", "code": 3927},
        "–ú–∏–∫—Å —Å–∞–ª–∞—Ç 0,125–∫–≥": {"unit": "–∫–≥", "code": 3975},
        "–ú–æ—Ä–∫–æ–≤—å –ø–æ-–∫–æ—Ä–µ–π—Å–∫–∏": {"unit": "—à—Ç.", "code": 4583},
        "–ú–æ—Ä–∫–æ–≤—å —Å–≤–µ–∂–∞—è": {"unit": "—à—Ç.", "code": 3976},
        "–ú—è—Ç–∞ —Å–≤–µ–∂–∞—è": {"unit": "—à—Ç.", "code": 3977},
        "–û–≥—É—Ä—Ü—ã –º–∞—Ä–∏–Ω –∫–æ–ª—å—Ü–∞ 1,0–∫–≥": {"unit": "–∫–≥", "code": 3928},
        "–û–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ": {"unit": "—à—Ç.", "code": 3978},
        "–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π": {"unit": "–ª", "code": 4548},
        "–ü–µ—Ä–µ—Ü –∑–∞–ø–µ—á–µ–Ω–Ω—ã–π 2,5–∫–≥": {"unit": "–∫–≥", "code": 3929},
        "–ü–µ—Ä–µ—Ü –∫—Ä–∞—Å–Ω—ã–π –æ—Å—Ç—Ä—ã–π": {"unit": "—à—Ç.", "code": 4408},
        "–ü–µ—Ä–µ—Ü –ø–æ—Ä—Ü–∏–æ–Ω–Ω—ã–π 1g": {"unit": "—à—Ç.", "code": 3861},
        "–ü–µ—Ä–µ—Ü —Ö–∞–ª–∞–ø–µ–Ω—å–æ 1,5–∫–≥": {"unit": "–∫–≥", "code": 3930},
        "–ü–µ—Ä–µ—Ü —á–µ—Ä–Ω—ã–π –¥—Ä–æ–±–ª–µ–Ω—ã–π": {"unit": "–ª", "code": 3862},
        "–ü–µ—Ä–µ—Ü —á–µ—Ä–Ω—ã–π –º–æ–ª–æ—Ç—ã–π": {"unit": "–ª", "code": 3863},
        "–ü–µ—Ç—Ä—É—à–∫–∞ —Å–≤–µ–∂–∞—è": {"unit": "—à—Ç.", "code": 3979},
        "–ü–µ—Ç—Ä—É—à–∫–∞ —Å—É—Ö–∞—è": {"unit": "—à—Ç.", "code": 3963},
        "–ü–æ–º–∏–¥–æ—Ä—ã —Å–≤ –∫–≥": {"unit": "–∫–≥", "code": 3980},
        "–ü–æ–º–∏–¥–æ—Ä—ã —á–µ—Ä—Ä–∏ 0,25–∫–≥": {"unit": "–∫–≥", "code": 3981},
        "–°–∞–ª–∞—Ç –ê–π—Å–±–µ—Ä–≥": {"unit": "–ª", "code": 3982},
        "–°–∞–ª–∞—Ç –∏–∑ –≤–æ–¥–æ—Ä–æ—Å–ª–µ–π —á—É–∫–∞ 1,0–∫–≥": {"unit": "–∫–≥", "code": 3925},
        "–¢–æ–º–∞—Ç—ã –≤—è–ª–µ–Ω—ã–µ 0,43–∫–≥": {"unit": "–∫–≥", "code": 3931},
        "–¢–æ–º–∞—Ç—ã –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ": {"unit": "—à—Ç.", "code": 4809},
        "–£–∫—Ä–æ–ø —Å–≤": {"unit": "—à—Ç.", "code": 3984},
        "–¶—É–∫–∏–Ω–∏": {"unit": "—à—Ç.", "code": 3985},
        "–¶—É–∫–∏–Ω–∏ –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π –ø/—Ñ": {"unit": "—à—Ç.", "code": 4549},
        "–ß–µ—Å–Ω–æ–∫ —Å–≤": {"unit": "—à—Ç.", "code": 3986},
        "–ß–µ—Å–Ω–æ–∫ —Å—É—Ö –º–æ–ª–æ—Ç—ã–π": {"unit": "–ª", "code": 3874},
        "–®–∞–º–ø–∏–Ω—å–æ–Ω—ã —Å–≤": {"unit": "—à—Ç.", "code": 4323},
        "–®–ø–∏–Ω–∞—Ç —Å–∞–ª–∞—Ç 0,125–∫–≥": {"unit": "–∫–≥", "code": 4341},
    },
    "–û—Ä–µ—Ö–∏": {
        "–ê—Ä–∞—Ö–∏—Å –≤–µ—Å–æ–≤–æ–π –∫–≥": {"unit": "–∫–≥", "code": 3846},
        "–ê—Ä–∞—Ö–∏—Å –∂–∞—Ä —Å–æ–ª—ë–Ω—ã–π 50g": {"unit": "–ª", "code": 3845},
        "–ö–µ—à—å—é –≤–µ—Å–æ–≤–æ–π –∫–≥": {"unit": "–∫–≥", "code": 3847},
        "–ö–µ—à—å—é –∂–∞—Ä 40g": {"unit": "—à—Ç.", "code": 3848},
        "–ú–∏–Ω–¥–∞–ª—å –∂–∞—Ä 40g": {"unit": "–ª", "code": 3850},
        "–°–º–µ—Å—å —Å–ª –∂–∞—Ä –æ—Ä–µ—Ö–æ–≤ —Å —Ü—É–∫–∞—Ç–∞–º–∏": {"unit": "–ª", "code": 3851},
        "–§–∏—Å—Ç–∞—à–∫–∏ –∂–∞—Ä —Å–æ–ª 40g": {"unit": "–ª", "code": 3852},
        "–§–∏—Å—Ç–∞—à–∫–∏ –∂–∞—Ä –∫–≥": {"unit": "–∫–≥", "code": 3849},
        "–§—É–Ω–¥—É–∫ —Å—É—à 40g": {"unit": "—à—Ç.", "code": 3853},
    },
    "–ü—Ä–æ—á–µ–µ": {
        "–ë–∞–∫–ª–∞–∂–∞–Ω –∫–æ–ø—á–µ–Ω—ã–π –ø/—Ñ": {"unit": "–ª", "code": 5465},
        "–ë—Ä—É—Å–Ω–∏–∫–∞ –Ω–∞ –ø–∏–≤–µ –ø/—Ñ": {"unit": "—à—Ç.", "code": 3875},
        "–ë—É–ª—å–æ–Ω –∫—É—Ä–∏–Ω—ã–π —Å—É—Ö–æ–π": {"unit": "–ª", "code": 3829},
        "–ì–æ—Ä–æ—Ö": {"unit": "—à—Ç.", "code": 4406},
        "–ì–æ—Ä—á–∏—Ü–∞ –¥–∏–∂ (—Å—Ä-–æ—Å—Ç—Ä–∞—è)": {"unit": "—à—Ç.", "code": 3876},
        "–ì–æ—Ä—á–∏—Ü–∞ –∑–µ—Ä–Ω–∏—Å—Ç–∞—è –∫–≥": {"unit": "–∫–≥", "code": 3877},
        "–ô–æ–≥—É—Ä—Ç –ì—Ä–µ—á–µ—Å–∫–∏–π": {"unit": "–≥—Ä.", "code": 4864},
        "–ö—Ä–∞—Ö–º–∞–ª": {"unit": "–ª", "code": 4870},
        "–õ–∏–º –∫–∏—Å–ª–æ—Ç–∞": {"unit": "–ª", "code": 4918},
        "–ú—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è": {"unit": "—à—Ç.", "code": 3960},
        "–°–≤–µ–∫–ª–∞": {"unit": "–ª", "code": 4763},
        "–°—É—Ö–∞—Ä–∏ –ø–∞–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ": {"unit": "—à—Ç.", "code": 4387},
        "–¢–æ–º–∞—Ç –ø–∞—Å—Ç–∞": {"unit": "—à—Ç.", "code": 3967},
        "–£–∫—Å—É—Å 9%": {"unit": "—à—Ç.", "code": 3832},
        "–£–∫—Å—É—Å –±–∞–ª—å–∑–∞–º–∏—á–µ—Å–∫–∏–π": {"unit": "–ª", "code": 5590},
        "–§–∞—Å–æ–ª—å –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è": {"unit": "–ª", "code": 4838},
        "–©—ë–∫–∏ –≥–æ–≤—è–∂—å–∏": {"unit": "—à—Ç.", "code": 4475},
        "–Ø–≥–æ–¥—ã –º–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫–∞": {"unit": "–ª", "code": 3948},
    },
    "–†—ã–±–∞": {
        "–ö—Ä–µ–≤–µ—Ç–∫–∏ 21/25 –±/–≥ —Å/–º –∫–≥": {"unit": "–∫–≥", "code": 3924},
        "–†—ã–±–∞ –∫—Ä–∞–±–æ–≤—ã–µ –ø–∞–ª–æ—á–∫–∏": {"unit": "–ª", "code": 4240},
        "–°–µ–ª—å–¥–µ—Ä–µ–π —Å—Ç–µ–±–µ–ª—å —Å–≤": {"unit": "–ª", "code": 3983},
        "–§–∏–ª–µ —Å–µ–ª—å–¥–∏ —Å/—Å": {"unit": "–ª", "code": 4410},
    },
    "–°–ª–∞–¥–æ—Å—Ç–∏": {
        "–ñ–µ–≤ —Ä–µ–∑–∏–Ω–∫–∞ –≤ –∞—Å—Å": {"unit": "—à—Ç.", "code": 3893},
        "–ö–∏–Ω–¥–µ—Ä": {"unit": "—à—Ç.", "code": 4556},
        "–ö—Ä–µ–Ω–¥–µ–ª—å –≤ –∞—Å—Å": {"unit": "–ª", "code": 4316},
        "–ú–∞—Ä–º–µ–ª–∞–¥ –≤ –∞—Å—Å": {"unit": "–ª", "code": 4557},
        "–ú–æ—Ä–æ–∂–µ–Ω–æ–µ –≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ –∫–≥": {"unit": "–∫–≥", "code": 4343},
        "–ü–µ—á–µ–Ω—å–µ –û–†–ï–û": {"unit": "—à—Ç.", "code": 4558},
        "–¢–∏–∫-—Ç–∞–∫ –≤ –∞—Å—Å": {"unit": "—à—Ç.", "code": 4806},
        "–•–æ–ª—Å –≤ –∞—Å—Å": {"unit": "–ª", "code": 4807},
        "–ß—É–ø–∞-—á—É–ø—Å": {"unit": "—à—Ç.", "code": 4563},
        "–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ñ–µ—Ç—ã": {"unit": "—à—Ç.", "code": 4289},
        "–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞—Ç–æ–Ω—á–∏–∫": {"unit": "—à—Ç.", "code": 4288},
    },
    "–°–æ—É—Å—ã": {
        "–ö–µ—Ç—á—É–ø": {"unit": "—à—Ç.", "code": 3878},
        "–ö—Ä–µ–º –∏–∑ —à–∞–º–ø —Å —Ç—Ä—é—Ñ–µ–ª–µ–º": {"unit": "–ª", "code": 3879},
        "–ú–µ–∫—Å–∏–∫–∞–Ω—Å–∫–∞—è —Å–º–µ—Å—å": {"unit": "—à—Ç.", "code": 4875},
        "–°–æ—É—Å –í–æ—Ä—á–µ—Å—Ç–µ—Ä 0,290–∫–≥": {"unit": "–∫–≥", "code": 3883},
        "–°–æ—É—Å –ì—É–∞–∫–∞–º–æ–ª–µ": {"unit": "–ª", "code": 4863},
        "–°–æ—É—Å –ö–∏–º—á–∏ 1,8–ª": {"unit": "–ª", "code": 3887},
        "–°–æ—É—Å –±–∞—Ä–±–µ–∫—é": {"unit": "—à—Ç.", "code": 3881},
        "–°–æ—É—Å –≤–∏—à–Ω–µ–≤–æ–µ –≤–∞—Ä–µ–Ω—å–µ –ø/—Ñ": {"unit": "—à—Ç.", "code": 3882},
        "–°–æ—É—Å –≥–ª–∞–∑—É—Ä—å –ø/—Ñ": {"unit": "–ª", "code": 3884},
        "–°–æ—É—Å –¥–æ–º–∞—à–Ω–∏–π –∫–µ—Ç—á—É–ø –ø/—Ñ": {"unit": "—à—Ç.", "code": 3885},
        "–°–æ—É—Å –∂–∏–¥–∫–∏–π –ß–µ–¥–¥–µ—Ä": {"unit": "—à—Ç.", "code": 3886},
        "–°–æ—É—Å –∂–∏–¥–∫–∏–π –¥—ã–º": {"unit": "—à—Ç.", "code": 4223},
        "–°–æ—É—Å –∫–∏—Å–ª–æ-—Å–ª–∞–¥–∫–∏–π": {"unit": "–ª", "code": 4582},
        "–°–æ—É—Å –∫—Ä–µ–º –±–∞–ª—å–∑–∞–º–∏–∫ 0,6–∫–≥": {"unit": "–∫–≥", "code": 3888},
        "–°–æ—É—Å –æ—Ä–µ—Ö–æ–≤—ã–π": {"unit": "—à—Ç.", "code": 3889},
        "–°–æ—É—Å –ø–µ—Ä–µ—á–Ω—ã–π –ø–æ–∫—É–ø–Ω–æ–π": {"unit": "—à—Ç.", "code": 4098},
        "–°–æ—É—Å —Å–æ–µ–≤—ã–π": {"unit": "—à—Ç.", "code": 3880},
        "–°–æ—É—Å —Ç–∞–±–∞—Å–∫–æ 150–º–ª": {"unit": "–º–ª", "code": 5579},
        "–°–æ—É—Å —á–∏–ª–∏ —Å–ª–∞–¥–∫–∏–π 0,92–∫–≥": {"unit": "–∫–≥", "code": 3890},
        "–°–æ—É—Å —á–∏–ª–∏-–≥–∞—Ä–ª–∏–∫ 0,24–∫–≥": {"unit": "–∫–≥", "code": 3891},
        "–°–æ—É—Å —à—Ä–∏—Ä–∞—á–∞": {"unit": "—à—Ç.", "code": 5409},
    },
    "–°–ø–µ—Ü–∏–∏/–ü—Ä–∏–ø—Ä–∞–≤—ã": {
        "–ö–æ—Ä–∏–∞–Ω–¥—Ä –º–æ–ª–æ—Ç—ã–π": {"unit": "–ª", "code": 3856},
        "–ö–æ—Ä–∏—Ü–∞ –º–æ–ª–æ—Ç–∞—è": {"unit": "–ª", "code": 3857},
        "–ö—É–Ω–∂—É—Ç —á–µ—Ä–Ω—ã–π": {"unit": "—à—Ç.", "code": 3858},
        "–ö—É—Ä–∫—É–º–∞": {"unit": "—à—Ç.", "code": 3859},
        "–õ–∞–≤—Ä–æ–≤—ã–π –ª–∏—Å—Ç 20g": {"unit": "–ª", "code": 3860},
        "–ú—ë–¥": {"unit": "—à—Ç.", "code": 3831},
        "–ü—Ä–∏–ø—Ä–∞–≤–∞ 5 –ø–µ—Ä—Ü–µ–≤ –≥–æ—Ä–æ—à–µ–∫": {"unit": "—à—Ç.", "code": 3864},
        "–ü—è—Ç—å –ø–µ—Ä—Ü–µ–≤ –¥—Ä–æ–±–ª–µ–Ω–Ω–∞—è 500g": {"unit": "–ª", "code": 3865},
        "–°–∞—Ö–∞—Ä –ú—É—Å–∫–æ–≤–∞–¥–æ —Ç—Ä–æ—Å—Ç–Ω–∏–∫–æ–≤—ã–π": {"unit": "—à—Ç.", "code": 3867},
        "–°–∞—Ö–∞—Ä –ø–æ—Ä—Ü–∏–æ–Ω–Ω—ã–π –≤ —Å—Ç–∏–∫–∞—Ö 5g": {"unit": "—à—Ç.", "code": 3866},
        "–°–∞—Ö–∞—Ä–Ω–∞—è –ø—É–¥—Ä–∞": {"unit": "—à—Ç.", "code": 3868},
        "–°–∞—Ö–∞—Ä–æ–∑–∞–º–µ–Ω–∏—Ç–µ–ª—å": {"unit": "–ª", "code": 3870},
        "–°–æ–ª—å": {"unit": "–ª", "code": 3871},
        "–°–æ–ª—å –º–æ—Ä—Å–∫–∞—è": {"unit": "–ª", "code": 3872},
        "–°–æ–ª—å –ø–æ—Ä—Ü–∏–æ–Ω–Ω–∞—è 1g": {"unit": "–ª", "code": 3873},
    },
    "–§—Ä—É–∫—Ç—ã": {
        "–ê–Ω–∞–Ω–∞—Å –°—É—Ö–æ—Ñ—Ä—É–∫—Ç": {"unit": "—à—Ç.", "code": 4485},
        "–ê–ø–µ–ª—å—Å–∏–Ω —Å–≤ –∫–≥": {"unit": "–∫–≥", "code": 3945},
        "–ë—Ä—É—Å–Ω–∏–∫–∞ —Å–º": {"unit": "—à—Ç.", "code": 4246},
        "–í–∏—à–Ω—è —Å–º": {"unit": "—à—Ç.", "code": 4247},
        "–õ–∞–π–º —Å–≤": {"unit": "–ª", "code": 3946},
        "–õ–∏–º–æ–Ω—ã —Å–≤": {"unit": "–ª", "code": 3947},
        "–ú–∞–Ω–≥–æ –°—É—Ö–æ—Ñ—Ä—É–∫—Ç": {"unit": "—à—Ç.", "code": 4484},
        "–û–±–ª–µ–ø–∏—Ö–∞ —Å–º": {"unit": "–ª", "code": 4248},
    },
    "–•–ª–µ–±": {
        "–ë–∞–≥–µ—Ç –ø—à–µ–Ω–∏—á–Ω—ã–π 0,3–∫–≥": {"unit": "–∫–≥", "code": 3949},
        "–ë–µ–ª—å–≥–∏–π—Å–∫–∞—è –≤–∞—Ñ–ª—è 26—à—Ç": {"unit": "–ª", "code": 3892},
        "–ë–µ—Ä–ª–∏–Ω–µ—Ä-–î–æ–Ω–∞—Ç—Å": {"unit": "–ª", "code": 4244},
        "–ë—Ä–µ—Ü–µ–ª—å-–¥–æ–≥ (—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ)": {"unit": "–ª", "code": 4278},
        "–ë—É–ª–æ—á–∫–∞ –±–µ–ª–∞—è –¥–ª—è –±—É—Ä–≥–µ—Ä–∞": {"unit": "–ª", "code": 3952},
        "–ë—É–ª–æ—á–∫–∞ –∑–µ—Ä–Ω–æ–≤–∞—è": {"unit": "–ª", "code": 3950},
        "–ë—É–ª–æ—á–∫–∞ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–∞—è": {"unit": "–ª", "code": 3951},
        "–ë—É–ª–æ—á–∫–∞ —á–µ—Ä–Ω–∞—è –¥–ª—è –±—É—Ä–≥–µ—Ä–∞": {"unit": "–ª", "code": 3953},
        "–î–æ–Ω–∞—Ç—Å –≤ –∞—Å—Å": {"unit": "—à—Ç.", "code": 4245},
        "–õ–∞–≤–∞—à 30—Å–º": {"unit": "–ª", "code": 4836},
        "–•–ª–µ–± –±–µ–ª—ã–π/—á—ë—Ä–Ω—ã–π": {"unit": "–ª", "code": 3969},
        "–•–ª–µ–± –±–æ—Ä–æ–¥–∏–Ω—Å–∫–∏–π 0,7–∫–≥": {"unit": "–∫–≥", "code": 3954},
    },
    "–ß–∏–ø—Å—ã/–°–Ω–µ–∫–∏": {
        "–í—è–ª–µ–Ω–æ–µ –º—è—Å–æ —Å–Ω–µ–∫ –ì—É—Ä–º—ç –º–∏–∫—Å 150g": {"unit": "–ª", "code": 4138},
        "–í—è–ª–µ–Ω–æ–µ –º—è—Å–æ —Å–Ω–µ–∫ –≤ –∞—Å—Å 50g": {"unit": "–ª", "code": 4137},
        "–°—É—Ö–∞—Ä–∏–∫–∏ —Ñ–∏—à–∫–∞": {"unit": "—à—Ç.", "code": 4228},
        "–ß–∞–∫–∞ —Å–Ω–µ–∫ –º–∏–∫—Å 50g": {"unit": "—à—Ç.", "code": 4229},
        "–ß–∏–ø—Å—ã –õ–µ–π*—Å –≤ –∞—Å—Å": {"unit": "–ª", "code": 3854},
        "–ß–∏–ø—Å—ã –ü—Ä–∏–Ω–≥–ª—Å –≤ –∞—Å—Å": {"unit": "–ª", "code": 4564},
        "–ß–∏–ø—Å—ã –•–∞–Ω—Ç–µ—Ä—Å –≤ –∞—Å—Å 0,025–≥—Ä": {"unit": "–≥—Ä.", "code": 5517},
        "–ß–∏–ø—Å—ã –•–∞–Ω—Ç–µ—Ä—Å –≤ –∞—Å—Å 0,125–≥—Ä": {"unit": "–≥—Ä.", "code": 5518},
        "–ß–∏–ø—Å—ã –•–∞–Ω—Ç–µ—Ä—Å –≤ –∞—Å—Å 0,150–≥—Ä": {"unit": "–≥—Ä.", "code": 5519},
    },
    "–Ø–π—Ü–∞": {
        "–ú–µ–ª–∞–Ω–∂": {"unit": "–ª", "code": 5401},
        "–Ø–π—Ü–æ –∫—É—Ä–∏–Ω–æ–µ —à—Ç": {"unit": "—à—Ç.", "code": 3834},
    },
}

LOCATIONS = {
    "–°–∫–ª–∞–¥": {},
    "–ö—É—Ö–Ω—è": {},
    "–û—Å—Ç—Ä–æ–≤–æ–∫": {}
}

def init_locations():
    for location in LOCATIONS:
        for category, products in GLOBAL_PRODUCTS.items():
            LOCATIONS[location][category] = dict(products)

init_locations()

# ============== –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ==============
@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form['password']
        with users_lock:
            if username in users and check_password_hash(users[username]['password'], password):
                session['username'] = username
                session['role'] = users[username]['role']
                return redirect('/admin' if users[username]['role'] == 'admin' else '/revision')
            else:
                return render_template_string(login_html, error="‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å")
    return render_template_string(login_html)

@app.route('/logout')
def logout():
    session.clear()
    return redirect('/login')

login_html = '''<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/><title>–í—Ö–æ–¥</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);height:100vh;display:flex;align-items:center;justify-content:center;margin:0;}
.login-box{background:white;padding:40px;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.3);max-width:400px;width:100%;}
h1{text-align:center;color:#667eea;margin-bottom:30px;}
.form-group{margin-bottom:20px;}
.form-group label{display:block;margin-bottom:8px;font-weight:600;}
.form-group input{width:100%;padding:10px;border:2px solid #e0e0e0;border-radius:8px;font-size:16px;box-sizing:border-box;}
.form-group input:focus{outline:none;border-color:#667eea;}
.btn{width:100%;background:#667eea;color:white;border:none;padding:12px;border-radius:8px;font-weight:600;cursor:pointer;font-size:16px;}
.btn:hover{background:#764ba2;}
.error{color:#e74c3c;background:#fadbd8;padding:10px;border-radius:8px;margin-bottom:15px;text-align:center;}
</style>
</head>
<body>
<div class="login-box">
<h1>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
{% if error %}<div class="error">{{error}}</div>{% endif %}
<form method="post">
<div class="form-group">
  <label>–õ–æ–≥–∏–Ω</label>
  <input type="text" name="username" required>
</div>
<div class="form-group">
  <label>–ü–∞—Ä–æ–ª—å</label>
  <input type="password" name="password" required>
</div>
<button class="btn" type="submit">–í–æ–π—Ç–∏</button>
</form>
</div>
</body>
</html>'''

# ============== –ü–†–û–í–ï–†–ö–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ==============
def require_login(f):
    def wrapper(*args, **kwargs):
        if 'username' not in session:
            return redirect('/login')
        return f(*args, **kwargs)
    wrapper.__name__ = f.__name__
    return wrapper

def require_admin(f):
    def wrapper(*args, **kwargs):
        if 'username' not in session or session.get('role') != 'admin':
            return redirect('/login')
        return f(*args, **kwargs)
    wrapper.__name__ = f.__name__
    return wrapper

# ============== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ==============
@app.route('/admin')
@require_admin
def admin_panel():
    with users_lock:
        user_list = [(u, users[u]['role']) for u in users]
    html = '''<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/><title>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:#f0f2f5;margin:0;padding:20px;}
.container{max-width:1000px;margin:0 auto;}
header{background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:20px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
header h1{margin:0;}
.header-buttons{display:flex;gap:10px;}
.logout-btn{background:white;color:#667eea;border:none;padding:8px 15px;border-radius:8px;font-weight:600;cursor:pointer;}
.revision-btn{background:#28a745;color:white;border:none;padding:8px 15px;border-radius:8px;font-weight:600;cursor:pointer;}
.tabs{display:flex;gap:10px;margin-bottom:20px;}
.tab-btn{background:white;border:2px solid #ccc;padding:12px 20px;border-radius:8px;cursor:pointer;font-weight:600;}
.tab-btn.active{background:#667eea;color:white;border:none;}
.tab-content{display:none;}
.tab-content.active{display:block;}
.section{background:white;padding:20px;border-radius:12px;margin-bottom:20px;}
h2{color:#667eea;border-bottom:2px solid #667eea;padding-bottom:10px;}
.form-group{margin-bottom:15px;}
.form-group label{display:block;margin-bottom:5px;font-weight:600;}
.form-group input{width:100%;padding:10px;border:2px solid #e0e0e0;border-radius:8px;box-sizing:border-box;}
select{width:100%;padding:10px;border:2px solid #e0e0e0;border-radius:8px;box-sizing:border-box;}
.btn{background:#667eea;color:white;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;margin-right:10px;}
.btn-danger{background:#e74c3c;}
.btn:hover{opacity:0.9;}
.user-table{width:100%;border-collapse:collapse;margin-top:15px;}
.user-table th, .user-table td{padding:12px;text-align:left;border-bottom:1px solid #ddd;}
.user-table th{background:#f5f5f5;font-weight:600;}
.pending-request{background:#fff3cd;padding:15px;border-radius:8px;margin-bottom:15px;border-left:4px solid #ffc107;}
.pending-buttons{display:flex;gap:10px;margin-top:10px;}
.btn-confirm{background:#28a745;}
.btn-cancel{background:#ffc107;color:#333;}
</style>
</head>
<body>
<div class="container">
<header>
<h1>üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h1>
<div class="header-buttons">
<a href="/revision"><button class="revision-btn">üìä –†–µ–≤–∏–∑–∏—è</button></a>
<a href="/logout"><button class="logout-btn">–í—ã—Ö–æ–¥</button></a>
</div>
</header>

<div class="tabs">
<button class="tab-btn active" onclick="switchTab('users')">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
<button class="tab-btn" onclick="switchTab('products')">üì¶ –¢–æ–≤–∞—Ä—ã</button>
<button class="tab-btn" onclick="switchTab('requests')">üì¨ –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ</button>
</div>

<!-- –í–ö–õ–ê–î–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò -->
<div id="users" class="tab-content active">
<div class="section">
<h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
<form method="post" action="/admin/create_user">
<div class="form-group">
  <label>–ù–æ–≤—ã–π –ª–æ–≥–∏–Ω</label>
  <input type="text" name="username" required>
</div>
<div class="form-group">
  <label>–ü–∞—Ä–æ–ª—å</label>
  <input type="text" name="password" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏" value="">
</div>
<button class="btn" type="submit">‚ûï –°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞</button>
</form>

<h3>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
<table class="user-table">
<tr><th>–õ–æ–≥–∏–Ω</th><th>–†–æ–ª—å</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>
{% for user, role in users %}
<tr>
<td>{{user}}</td>
<td>{{role}}</td>
<td>
{% if user != 'admin' %}
<form method="post" action="/admin/delete_user" style="display:inline;">
<input type="hidden" name="username" value="{{user}}">
<button type="submit" class="btn btn-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å?')">–£–¥–∞–ª–∏—Ç—å</button>
</form>
{% endif %}
</td>
</tr>
{% endfor %}
</table>
</div>
</div>

<!-- –í–ö–õ–ê–î–ö–ê –¢–û–í–ê–†–´ -->
<div id="products" class="tab-content">
<div class="section">
<h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π</h2>
<form method="post" action="/admin/edit_products">
<div class="form-group">
  <label>–õ–æ–∫–∞—Ü–∏—è</label>
  <select name="location" required>
    <option value="–°–∫–ª–∞–¥">–°–∫–ª–∞–¥</option>
    <option value="–ö—É—Ö–Ω—è">–ö—É—Ö–Ω—è</option>
    <option value="–û—Å—Ç—Ä–æ–≤–æ–∫">–û—Å—Ç—Ä–æ–≤–æ–∫</option>
  </select>
</div>
<div class="form-group">
  <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
  <input type="text" name="category" required>
</div>
<div class="form-group">
  <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
  <input type="text" name="name" required>
</div>
<div class="form-group">
  <label>–ö–æ–¥</label>
  <input type="text" name="code" required>
</div>
<div class="form-group">
  <label>–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è</label>
  <input type="text" name="unit" required>
</div>
<button class="btn" type="submit" name="action" value="add">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
<button class="btn btn-danger" type="submit" name="action" value="remove">‚ûñ –£–¥–∞–ª–∏—Ç—å</button>
</form>
</div>
</div>

<!-- –í–ö–õ–ê–î–ö–ê –ó–ê–ü–†–û–°–´ -->
<div id="requests" class="tab-content">
<div class="section">
<h2>üì¨ –û–∂–∏–¥–∞—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ</h2>
<div id="requests-list">
{% if not pending_finish %}
<p style="color:#999;">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</p>
{% else %}
{% for req_id, data in pending_finish.items() %}
<div class="pending-request">
<strong>–õ–æ–∫–∞—Ü–∏—è:</strong> {{data.location}}<br>
<strong>–í—Ä–µ–º—è:</strong> {{data.timestamp}}<br>
<strong>–û–ø–µ—Ä–∞—Ç–æ—Ä:</strong> {{data.user}}<br>
<div class="pending-buttons">
<form method="post" action="/admin/finish_confirm" style="display:inline;">
<input type="hidden" name="request_id" value="{{req_id}}">
<button type="submit" class="btn btn-confirm">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
</form>
<form method="post" action="/admin/finish_cancel" style="display:inline;">
<input type="hidden" name="request_id" value="{{req_id}}">
<button type="submit" class="btn btn-cancel">‚ùå –û—Ç–º–µ–Ω–∏—Ç—å</button>
</form>
</div>
</div>
{% endfor %}
{% endif %}
</div>
</div>
</div>

<script>
function switchTab(tab) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
  event.target.classList.add('active');
}
</script>
</body>
</html>'''
    return render_template_string(html, users=user_list, pending_finish=pending_finish)

@app.route('/admin/create_user', methods=['POST'])
@require_admin
def create_user():
    username = request.form['username']
    password = request.form['password'] or secrets.token_urlsafe(8)
    with users_lock:
        if username not in users:
            users[username] = {'password': generate_password_hash(password), 'role': 'operator'}
    return redirect('/admin')

@app.route('/admin/delete_user', methods=['POST'])
@require_admin
def delete_user():
    username = request.form['username']
    with users_lock:
        if username in users and username != 'admin':
            del users[username]
    return redirect('/admin')

@app.route('/admin/edit_products', methods=['POST'])
@require_admin
def edit_products():
    location = request.form['location']
    category = request.form['category']
    name = request.form['name']
    code = request.form['code']
    unit = request.form['unit']
    action = request.form['action']
    
    if action == 'add':
        if category not in LOCATIONS[location]:
            LOCATIONS[location][category] = {}
        LOCATIONS[location][category][name] = {'code': code, 'unit': unit}
    elif action == 'remove':
        if category in LOCATIONS[location] and name in LOCATIONS[location][category]:
            del LOCATIONS[location][category][name]
    return redirect('/admin')

@app.route('/admin/finish_confirm', methods=['POST'])
@require_admin
def finish_confirm():
    request_id = request.form['request_id']
    if request_id in pending_finish:
        rows = []
        with inventory_lock:
            for location in LOCATIONS:
                for cat, products in LOCATIONS[location].items():
                    for name, info in products.items():
                        qty = inventory.get((location, name), 0)
                        rows.append({
                            "–õ–æ–∫–∞—Ü–∏—è": location,
                            "–ö–∞—Ç–µ–≥–æ—Ä–∏—è": cat,
                            "–¢–æ–≤–∞—Ä": name,
                            "–ö–æ–¥": info['code'],
                            "–ï–¥–∏–Ω–∏—Ü–∞": info['unit'],
                            "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ": qty
                        })
            inventory.clear()
            history.clear()
        
        df = pd.DataFrame(rows) if rows else pd.DataFrame([{"–õ–æ–∫–∞—Ü–∏—è":"","–ö–∞—Ç–µ–≥–æ—Ä–∏—è":"","–¢–æ–≤–∞—Ä":"–ù–µ—Ç","–ö–æ–¥":"","–ï–¥–∏–Ω–∏—Ü–∞":"","–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ":0}])
        output = io.BytesIO()
        with pd.ExcelWriter(output, engine="xlsxwriter") as writer:
            df.to_excel(writer, index=False, sheet_name="–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è")
        output.seek(0)
        del pending_finish[request_id]
        return send_file(output, as_attachment=True, download_name="–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è.xlsx",
                         mimetype="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")
    return redirect('/admin')

@app.route('/admin/finish_cancel', methods=['POST'])
@require_admin
def finish_cancel():
    request_id = request.form['request_id']
    if request_id in pending_finish:
        del pending_finish[request_id]
    return redirect('/admin')

# ============== –†–ï–í–ò–ó–ò–Ø (–î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–∞) ==============
@app.route('/revision')
@require_login
def revision():
    selected_location = request.args.get("location", "–°–∫–ª–∞–¥")
    with inventory_lock:
        inv = dict(inventory)
    
    return render_template_string(revision_html, locations=LOCATIONS, inventory=inv, current=selected_location, role=session.get('role', 'operator'))

revision_html = '''<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/><title>–†–µ–≤–∏–∑–∏—è</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:#f0f2f5;margin:0;padding:20px;}
header{background:linear-gradient(135deg,#667eea,#764ba2);color:white;text-align:center;padding:25px;border-radius:12px;position:relative;margin-bottom:25px;}
header h1{margin:0;}
.header-buttons{position:absolute;right:25px;top:20px;display:flex;gap:10px;}
.admin-btn{background:#ff9800;color:white;border:none;padding:8px 15px;border-radius:8px;font-weight:600;cursor:pointer;}
.logout-btn{background:white;color:#667eea;border:none;padding:8px 15px;border-radius:8px;font-weight:600;cursor:pointer;}
.tabs{display:flex;justify-content:center;gap:10px;margin-bottom:20px;flex-wrap:wrap;}
.tab{padding:10px 25px;background:white;border-radius:8px;border:2px solid #ccc;font-weight:600;cursor:pointer;text-decoration:none;color:#333;}
.tab.active{background:#667eea;color:white;border:none;}
.product-item{background:#f9f9ff;padding:15px 20px;border-left:4px solid #667eea;border-radius:7px;margin:8px 0;display:flex;justify-content:space-between;align-items:center;cursor:pointer;}
.badge{background:#667eea;color:white;padding:3px 10px;border-radius:6px;font-size:14px;}
button.btn-end{background:#e74c3c;color:white;border:none;font-size:17px;padding:12px 35px;border-radius:8px;cursor:pointer;display:block;margin:30px auto;}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:10;}
.modal.active{display:flex;}
.modal-content{background:white;padding:20px;border-radius:10px;max-width:440px;width:90%;box-shadow:0 15px 40px rgba(0,0,0,0.3);}
.close-btn{background:none;border:none;font-size:24px;cursor:pointer;color:#999;float:right;}
.calc-input{width:100%;font-size:22px;border:2px solid #ccd;border-radius:8px;padding:8px;margin-bottom:10px;text-align:right;box-sizing:border-box;}
.calc-buttons{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;}
.calc-btn{padding:12px;border:none;border-radius:6px;background:#f0f0f0;font-size:18px;cursor:pointer;}
.calc-btn.operator{background:#667eea;color:white;}
.total-display{text-align:center;margin:10px 0;font-size:18px;font-weight:600;color:#667eea;}
.search-box input{width:100%;padding:10px;border:2px solid #e0e0e0;border-radius:8px;margin-bottom:15px;box-sizing:border-box;}
</style>
</head>
<body>
<header>
<h1>üìä –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è</h1>
<div class="header-buttons">
{% if role == 'admin' %}
<a href="/admin"><button class="admin-btn">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button></a>
{% endif %}
<a href="/logout"><button class="logout-btn">–í—ã—Ö–æ–¥</button></a>
</div>
</header>

<div class="tabs">
<a href="/revision?location=–°–∫–ª–∞–¥" class="tab {% if '–°–∫–ª–∞–¥' == current %}active{% endif %}">–°–∫–ª–∞–¥</a>
<a href="/revision?location=–ö—É—Ö–Ω—è" class="tab {% if '–ö—É—Ö–Ω—è' == current %}active{% endif %}">–ö—É—Ö–Ω—è</a>
<a href="/revision?location=–û—Å—Ç—Ä–æ–≤–æ–∫" class="tab {% if '–û—Å—Ç—Ä–æ–≤–æ–∫' == current %}active{% endif %}">–û—Å—Ç—Ä–æ–≤–æ–∫</a>
</div>

<div class="location-content">
<h2>{{current}}</h2>
<input type="text" id="search" placeholder="üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞..." onkeyup="filterProducts()">
<div id="productList">
{% for cat, products in locations[current].items() %}
  <h3>{{cat}}</h3>
  {% for name, data in products.items() %}
  {% set qty = inventory.get((current, name), 0) %}
  <div class="product-item" data-name="{{name | lower}}" onclick="openCalc('{{current}}','{{name}}','{{data.unit}}')">
    <span>{{name}} <span style="color:#667eea">{{data.unit}}</span></span>
    {% if qty > 0%}<span class="badge">{{qty}}</span>{% endif %}
  </div>
  {% endfor %}
{% endfor %}
</div>
</div>

<button class="btn-end" onclick="requestFinish()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>

<!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä -->
<div class="modal" id="calcModal">
<div class="modal-content">
<button class="close-btn" onclick="closeCalc()">√ó</button>
<h3 id="calcTitle"></h3>
<input type="text" id="calcDisplay" class="calc-input" readonly value="0">
<div class="calc-buttons">
<button class="calc-btn" onclick="num('7')">7</button><button class="calc-btn" onclick="num('8')">8</button>
<button class="calc-btn" onclick="num('9')">9</button><button class="calc-btn operator" onclick="setOp('+')">+</button>
<button class="calc-btn" onclick="num('4')">4</button><button class="calc-btn" onclick="num('5')">5</button>
<button class="calc-btn" onclick="num('6')">6</button><button class="calc-btn operator" onclick="setOp('-')">‚àí</button>
<button class="calc-btn" onclick="num('1')">1</button><button class="calc-btn" onclick="num('2')">2</button>
<button class="calc-btn" onclick="num('3')">3</button><button class="calc-btn operator" onclick="setOp('*')">√ó</button>
<button class="calc-btn" onclick="clr()">C</button><button class="calc-btn" onclick="num('0')">0</button>
<button class="calc-btn" onclick="num('.')">.</button><button class="calc-btn operator" onclick="setOp('/')">√∑</button>
<button class="calc-btn operator" onclick="calculate()">=</button><button class="calc-btn operator" onclick="addToTotal()">‚úì</button>
</div>
<div class="total-display">–ò—Ç–æ–≥–æ: <span id="total">0</span> <span id="unit"></span></div>
<button class="calc-btn operator" style="width:100%;margin-top:10px;" onclick="saveResult()">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>
</div>

<!-- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è -->
<div class="modal" id="confirmModal">
<div class="modal-content" style="text-align:center;padding:30px;">
<h2 style="color:#667eea;margin-bottom:20px;">‚è≥ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</h2>
<p>–û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏...</p>
<button class="calc-btn operator" style="background:#ffc107;color:#333;border:none;padding:12px 30px;" onclick="cancelRequest()">–û—Ç–º–µ–Ω–∞</button>
</div>
</div>

<script>
let loc='', prod='', unit='';
let val='0', op=null, prev=null, total=0;

function filterProducts(){
  const filter=document.getElementById('search').value.toLowerCase();
  document.querySelectorAll('.product-item').forEach(item=>{
    item.style.display=item.getAttribute('data-name').includes(filter)?'':'none';
  });
}

function openCalc(l,p,u){
  loc=l;prod=p;unit=u;total=0;val='0';op=null;prev=null;
  document.getElementById('calcTitle').innerText=p+" ("+u+")";
  document.getElementById('unit').innerText=u;
  document.getElementById('calcDisplay').value='0';
  document.getElementById('calcModal').classList.add('active');
}

function closeCalc(){document.getElementById('calcModal').classList.remove('active');}

function num(n){if(val==='0'||val==='Error')val=n;else val+=n;document.getElementById('calcDisplay').value=val;}
function setOp(o){prev=parseFloat(val);val='0';op=o;}
function calculate(){if(op&&prev!=null){const cur=parseFloat(val);let r;
  switch(op){case '+':r=prev+cur;break;case '-':r=prev-cur;break;case '*':r=prev*cur;break;case '/':r=cur!==0?prev/cur:'Error';break;}
  val=r.toString();op=null;prev=null;document.getElementById('calcDisplay').value=val;}}
function clr(){val='0';prev=null;op=null;document.getElementById('calcDisplay').value='0';}
function addToTotal(){calculate();let n=parseFloat(val);if(!isNaN(n))total+=n;document.getElementById('total').innerText=total;val='0';document.getElementById('calcDisplay').value='0';}

async function saveResult(){
  let n=total>0?total:parseFloat(val);
  if(isNaN(n)||n<=0){alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!');return;}
  const fd=new FormData();fd.append('location',loc);fd.append('name',prod);fd.append('count',n);
  await fetch('/add_api',{method:'POST',body:fd});
  closeCalc();window.location='/revision?location='+encodeURIComponent(loc);
}

async function requestFinish(){
  const resp = await fetch('/request_finish?location=' + encodeURIComponent(loc||'–í—Å–µ'), {method:'POST'});
  document.getElementById('confirmModal').classList.add('active');
}

function cancelRequest(){
  document.getElementById('confirmModal').classList.remove('active');
}
</script>
</body>
</html>'''

@app.route('/add_api', methods=['POST'])
@require_login
def add_api():
    location = request.form['location']
    name = request.form['name']
    count = float(request.form['count'])
    timestamp = datetime.now().strftime("%d.%m %H:%M:%S")
    key = (location, name)
    with inventory_lock:
        inventory[key] = inventory.get(key, 0) + count
        history.setdefault(key, []).append(f"{timestamp}: {session['username']} –¥–æ–±–∞–≤–∏–ª {count}")
    return ('', 204)

@app.route('/request_finish', methods=['POST'])
@require_login
def request_finish():
    request_id = secrets.token_urlsafe(8)
    location = request.args.get('location', '–í—Å–µ')
    pending_finish[request_id] = {
        'user': session['username'],
        'location': location,
        'timestamp': datetime.now().strftime("%d.%m %H:%M:%S")
    }
    return jsonify({'request_id': request_id})

if __name__ == "__main__":
    port = int(os.environ.get('PORT', 7000))
    debug = os.environ.get('FLASK_ENV') != 'production'
    app.run(host="0.0.0.0", port=port, debug=debug)
